<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="oov" />
  <title>独自のオブジェクト</title>
  <style type="text/css">
  </style>
<link rel="stylesheet" href="assets/style.css">
</head>
<body>
<div id="ptk-outer">
<div id="ptk-menu" class="ptk-selected-obj">
  <ul>
    <li class="ptk-menu-item-index"><a href="index.html">はじめに</a></li>
    <li class="ptk-menu-item-tutorial"><a href="tutorial.html">チュートリアル</a></li>
    <li class="ptk-menu-item-decorate"><a href="decorate.html">テキストの装飾</a></li>
    <li class="ptk-menu-item-pfv"><a href="pfv.html">PSDTool のお気に入りを使う</a></li>
    <li class="ptk-menu-item-forcepser"><a href="forcepser.html">かんしくん</a></li>
    <li class="ptk-menu-item-obj ptk-menu-item-psd ptk-menu-item-subobj ptk-menu-item-otheranm ptk-menu-item-prep">オブジェクトリファレンス
      <ul>
        <li class="ptk-menu-item-obj"><a href="obj.html">独自のオブジェクト</a>
          <ul>
            <li><a href="obj.html#PSD_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.AA.E3.83.96.E3.82.B8.E3.82.A7.E3.82.AF.E3.83.88">PSD ファイルオブジェクト</a></li>
            <li><a href="obj.html#.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA">字幕表示</a></li>
            <li><a href="obj.html#.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA.EF.BC.88.E3.82.AD.E3.83.A3.E3.83.83.E3.82.B7.E3.83.A5.EF.BC.89">字幕表示（キャッシュ）</a></li>
            <li><a href="obj.html#.E8.87.AA.E5.8B.95.E6.8A.98.E3.82.8A.E8.BF.94.E3.81.97.E3.83.86.E3.82.AD.E3.82.B9.E3.83.88">自動折り返しテキスト</a></li>
          </ul>
        </li>
        <li class="ptk-menu-item-psd"><a href="psd.html">PSD アニメーション効果</a>
          <ul>
            <li><a href="psd.html#.E7.9B.AE.E3.83.91.E3.83.81.40PSD">目パチ</a> | <a href="psd.html#.E7.9B.AE.E3.83.91.E3.83.81_.E3.82.92_Lua_.E3.82.B9.E3.82.AF.E3.83.AA.E3.83.97.E3.83.88.E3.81.8B.E3.82.89.E4.BD.BF.E3.81.86">フォーム</a></li>
            <li><a href="psd.html#.E5.8F.A3.E3.83.91.E3.82.AF_.E9.96.8B.E9.96.89.E3.81.AE.E3.81.BF.40PSD">口パク 開閉のみ</a> | <a href="psd.html#.E5.8F.A3.E3.83.91.E3.82.AF_.E9.96.8B.E9.96.89.E3.81.AE.E3.81.BF_.E3.82.92_Lua_.E3.82.B9.E3.82.AF.E3.83.AA.E3.83.97.E3.83.88.E3.81.8B.E3.82.89.E4.BD.BF.E3.81.86">フォーム</a></li>
            <li><a href="psd.html#.E5.8F.A3.E3.83.91.E3.82.AF_.E3.81.82.E3.81.84.E3.81.86.E3.81.88.E3.81.8A.40PSD">口パク あいうえお</a> | <a href="psd.html#.E5.8F.A3.E3.83.91.E3.82.AF_.E3.81.82.E3.81.84.E3.81.86.E3.81.88.E3.81.8A_.E3.82.92_Lua_.E3.82.B9.E3.82.AF.E3.83.AA.E3.83.97.E3.83.88.E3.81.8B.E3.82.89.E4.BD.BF.E3.81.86">フォーム</a></li>
          </ul>
        </li>
        <li class="ptk-menu-item-subobj"><a href="subobj.html">subobj アニメーション効果</a></li>
        <li class="ptk-menu-item-otheranm"><a href="otheranm.html">その他のアニメーション効果</a></li>
        <li class="ptk-menu-item-prep"><a href="prep.html">準備オブジェクト</a></li>
      </ul>
    </li>
    <li class="ptk-menu-item-plugins"><a href="plugins.html">付属プラグイン</a></li>
    <li class="ptk-menu-item-setting"><a href="setting.html">設定</a></li>
    <li class="ptk-menu-item-faq"><a href="faq.html">よくある質問</a></li>
  </ul>
</div>
<div id="ptk-main">
<header>
<h1 class="title">独自のオブジェクト</h1>
</header>
<nav id="TOC">
<ul>
<li><a
href="#PSD_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.AA.E3.83.96.E3.82.B8.E3.82.A7.E3.82.AF.E3.83.88"
id="toc-PSD_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.AA.E3.83.96.E3.82.B8.E3.82.A7.E3.82.AF.E3.83.88">PSD
ファイルオブジェクト</a>
<ul>
<li><a href="#PSDToolKit_.E3.82.A6.E3.82.A3.E3.83.B3.E3.83.89.E3.82.A6"
id="toc-PSDToolKit_.E3.82.A6.E3.82.A3.E3.83.B3.E3.83.89.E3.82.A6">PSDToolKit
ウィンドウ</a></li>
</ul></li>
<li><a href="#.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA"
id="toc-.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA">字幕表示</a>
<ul>
<li><a href="#modifier_.E3.81.AE.E4.BD.BF.E7.94.A8.E4.BE.8B"
id="toc-modifier_.E3.81.AE.E4.BD.BF.E7.94.A8.E4.BE.8B">modifier
の使用例</a></li>
</ul></li>
<li><a
href="#.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA.EF.BC.88.E3.82.AD.E3.83.A3.E3.83.83.E3.82.B7.E3.83.A5.EF.BC.89"
id="toc-.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA.EF.BC.88.E3.82.AD.E3.83.A3.E3.83.83.E3.82.B7.E3.83.A5.EF.BC.89">字幕表示（キャッシュ）</a></li>
<li><a
href="#.E8.87.AA.E5.8B.95.E6.8A.98.E3.82.8A.E8.BF.94.E3.81.97.E3.83.86.E3.82.AD.E3.82.B9.E3.83.88"
id="toc-.E8.87.AA.E5.8B.95.E6.8A.98.E3.82.8A.E8.BF.94.E3.81.97.E3.83.86.E3.82.AD.E3.82.B9.E3.83.88">自動折り返しテキスト</a></li>
</ul>
</nav>
<h2
id="PSD_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.AA.E3.83.96.E3.82.B8.E3.82.A7.E3.82.AF.E3.83.88">PSD
ファイルオブジェクト</h2>
<p>PSD ファイルを読み込んだ際に生成されるオブジェクトを
<code>PSD ファイルオブジェクト</code> と呼びます。<br />
その実態はスクリプトが記述された <code>テキスト</code> オブジェクトに <a
href="psd.html#.E6.8F.8F.E7.94.BB.40PSD"><code>描画@PSD</code></a>
が追加されたものです。</p>
<p>テキストの見た目を変更するプロパティ（フォント名やサイズや文字揃えなど）は変更しないでください。</p>
<p>テキスト入力欄には以下のオプション設定があり、必要に応じて書き換えて使用します。</p>
<table>
<thead>
<tr class="header">
<th>設定名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>lipsync</code></td>
<td><a
href="prep.html#.E5.8F.A3.E3.83.91.E3.82.AF.E6.BA.96.E5.82.99.40PSDToolKit"><code>口パク準備</code></a>
があるレイヤー番号を半角整数で指定します。<br>これを指定すると
<code>口パク準備</code> の設置区間に合わせて <a
href="subobj.html">subobj アニメーション効果</a>
が使えます。<br>（ただし <code>口パク準備（音素のみ）</code>
では使えません）</td>
</tr>
<tr class="even">
<td><code>mpslider</code></td>
<td><a
href="prep.html#.E5.A4.9A.E7.9B.AE.E7.9A.84.E3.82.B9.E3.83.A9.E3.82.A4.E3.83.80.E3.83.BC.40PSDToolKit"><code>多目的スライダー</code></a>があるレイヤー番号を
<code>1</code> のような半角整数か、あるいは <code>{1, 2}</code>
のような半角整数のテーブルで指定します。<br>複数のレイヤー番号を指定した際は、先に指定されたものが優先的に採用されます。<br><code>mpslider</code>
を指定すると <code>多目的スライダー</code> の設置区間に合わせて <a
href="subobj.html">subobj アニメーション効果</a>
が使えます。<br><code>lipsync</code> と <code>mpslider</code>
が同時に指定されている場合は <code>多目的スライダー</code>
の区間が使用されます。<br>複数の <code>多目的スライダー</code>
を使用する場合は一番最初のレイヤー番号の区間が使用されます。</td>
</tr>
<tr class="odd">
<td><code>scene</code></td>
<td>シーン上でオブジェクトを使うときに、他のシーンと被らない番号を指定します。<br>変更しなくても問題なく動作しますが、一定の条件が揃った場合に描画負荷が極端に高くなることがあります。</td>
</tr>
<tr class="even">
<td><code>tag</code></td>
<td>PSDToolKit ウィンドウに表示されている PSD
ファイルのうち、どれに関連付けられているのかを示すタグです。<br><code>0</code>
以外の値を指定してあると、対応する PSD ファイルが PSDToolKit
ウィンドウになくても自動的に追加されます。</td>
</tr>
<tr class="odd">
<td><code>sendguard</code></td>
<td>PSDToolKit ウィンドウから <code>送る</code> ボタンで PSD
ファイルを割り当てるときに、今までとは異なる PSD
ファイルを割り当てようとした際に確認を行うかどうかを指定します。<br><code>0</code>
- 確認を行いません。<br><code>1</code> -
本当に割り当てるか確認ダイアログを表示します。</td>
</tr>
<tr class="even">
<td><code>ls_locut</code></td>
<td><code>口パク準備</code> で <code>ローカット</code> を <code>0</code>
にしている場合、ここで指定した値が使用されます。</td>
</tr>
<tr class="odd">
<td><code>ls_hicut</code></td>
<td><code>口パク準備</code> で <code>ハイカット</code> を <code>0</code>
にしている場合、ここで指定した値が使用されます。</td>
</tr>
<tr class="even">
<td><code>ls_threshold</code></td>
<td><code>口パク準備</code> で <code>しきい値</code> を <code>0</code>
にしている場合、ここで指定した値が使用されます。</td>
</tr>
<tr class="odd">
<td><code>ls_sensitivity</code></td>
<td><code>口パク準備</code> で <code>感度</code> を <code>0</code>
にしている場合、ここで指定した値が使用されます。</td>
</tr>
</tbody>
</table>
<h3
id="PSDToolKit_.E3.82.A6.E3.82.A3.E3.83.B3.E3.83.89.E3.82.A6">PSDToolKit
ウィンドウ</h3>
<p><code>PSDToolKit ウィンドウ</code> は <a
href="#PSD_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.AA.E3.83.96.E3.82.B8.E3.82.A7.E3.82.AF.E3.83.88"><code>PSD ファイルオブジェクト</code></a>
のレイヤーの表示を切り替えたり、レイヤー名をコピーしたりするために使用するウィンドウです。</p>
<p>このウィンドウにファイルをドラッグ＆ドロップするとファイル切り替えタブにファイルを追加することもできます。</p>
<p>AviUtl のメインメニューから
<code>編集</code>→<code>PSDToolKit</code>→<code>ウィンドウを表示</code>
で表示できます。</p>
<p><img src="assets/obj-ptkwnd.png" alt="PSDToolKit ウィンドウ" /></p>
<table>
<thead>
<tr class="header">
<th>機能名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>送る</code> ボタン</td>
<td>現在の表示構成を拡張編集に送信します。<br>ただし
<code>PSD ファイルオブジェクト</code>
のテキスト入力欄が見えていないと送れません。<br><code>Ctrl + S</code>
のショートカットキーで押すこともできます。</td>
</tr>
<tr class="even">
<td><code>取り込む</code> ボタン</td>
<td>拡張編集上で最後に使われた表示構成を取り込みます。<br>取り込み対象は
<a
href="#PSD_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.AA.E3.83.96.E3.82.B8.E3.82.A7.E3.82.AF.E3.83.88"><code>tag</code></a>
プロパティによって識別されます。</td>
</tr>
<tr class="odd">
<td>反転ボタン</td>
<td>画像を <code>⇆</code> で左右に、<code>⇅</code>
で上下に反転します。<br>もし PSD ファイル側で <a
href="https://oov.github.io/psdtool/manual.html#original-feature-flip">PSDTool
の反転レイヤー指定機能</a>が使われている場合はレイヤーも自動で切り替わり、文字の反転やアクセサリーの左右逆、着物の左前などの問題が自動で解消されます。</td>
</tr>
<tr class="even">
<td>ファイルの名前</td>
<td>現在編集中の PSD ファイルの名前です。</td>
</tr>
<tr class="odd">
<td><code>×</code>（閉じる）ボタン</td>
<td>編集中の PSD
ファイルを閉じます。<br>閉じてもこのウィンドウから見えなくなるだけで、拡張編集では引き続き表示されます。<br><a
href="#PSD_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.AA.E3.83.96.E3.82.B8.E3.82.A7.E3.82.AF.E3.83.88"><code>tag</code></a>
プロパティが設定されていれば、閉じても描画されたタイミングで復活します。</td>
</tr>
<tr class="even">
<td>ファイル切り替えタブ</td>
<td>複数の PSD
ファイルを読み込んでいる時は、ここに表示されるサムネイルをクリックすることで切り替えできます。</td>
</tr>
<tr class="odd">
<td><code>レイヤー</code> タブ</td>
<td><a href="https://oov.github.io/psdtool/">PSDTool</a>
で作成したお気に入りを一緒に読み込んでいる時は <code>レイヤー</code>
の他に <code>お気に入り</code> や <code>シンプルV</code>
タブが現れます。</td>
</tr>
<tr class="even">
<td>レイヤー</td>
<td><code>クリック</code>
で表示／非表示を切り替えできます。<br>レイヤー名が <code>*</code>
で始まる <a
href="https://oov.github.io/psdtool/manual.html#original-feature-asterisk">PSDTool
のラジオボタン化機能</a>を利用したレイヤーは、グループ内で常にひとつだけ表示された状態になります。&lt;br&gt;`Ctrl
+ クリック`
すると同じ階層の中でクリックしたレイヤーのみを表示します。<br><code>右クリック</code>
すると、レイヤーの名前をクリップボードにコピーしたりできるメニューが表示されます。</td>
</tr>
<tr class="odd">
<td>フォルダー</td>
<td>クリックで開閉できます。</td>
</tr>
<tr class="even">
<td>強制表示レイヤー</td>
<td>右下に鍵マークがついているのは PSD ファイル側で <a
href="https://oov.github.io/psdtool/manual.html#original-feature-exclamation">PSDTool
の強制表示化機能</a>を使っているレイヤーです。&lt;br&gt;非表示にするとおかしな表示状態になることが予めわかっているレイヤーに設定されています。</td>
</tr>
<tr class="odd">
<td>縮小率</td>
<td>PSDToolKit
ウィンドウ内での縮小率の設定です。<br>ここでの縮小率は拡張編集側には反映されません。</td>
</tr>
</tbody>
</table>
<h2 id=".E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA">字幕表示</h2>
<p><code>字幕表示</code> は <a
href="prep.html#.E5.AD.97.E5.B9.95.E6.BA.96.E5.82.99"><code>字幕準備</code></a>
で用意されたテキストを画面に表示するためのオブジェクトです。<br />
その実態はスクリプトが記述された <code>テキスト</code>
オブジェクトです。</p>
<p><code>字幕表示</code> は拡張編集の右クリックメニューから
<code>メディアオブジェクトの追加</code>→<code>PSDToolKit</code>→<code>字幕表示</code>
で作成できます。</p>
<p><code>字幕表示</code> では <code>字幕準備</code> の設置区間に合わせて
<a href="subobj.html">subobj アニメーション効果</a> が使用可能です。</p>
<p>テキスト入力欄には以下の設定があります。</p>
<table>
<thead>
<tr class="header">
<th>設定名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>layer</code></td>
<td><a
href="prep.html#.E5.AD.97.E5.B9.95.E6.BA.96.E5.82.99"><code>字幕準備</code></a>があるレイヤー番号を半角整数で指定します。</td>
</tr>
<tr class="even">
<td><code>modifier</code></td>
<td>文字列か関数を指定すると、字幕のテキストを改変できます。<br>文字列を指定した場合はテキストが先頭に追加され、関数を指定した場合は戻り値が字幕になります。</td>
</tr>
</tbody>
</table>
<p>上記以外の設定項目や効果については <a
href="decorate.html">テキストの装飾</a> を参照してください。</p>
<h3 id="modifier_.E3.81.AE.E4.BD.BF.E7.94.A8.E4.BE.8B">modifier
の使用例</h3>
<p><code>modifer</code>
を使うと字幕テキストを表示する前に改変することができます。<br />
ここでは字幕準備には <code>こんにちは</code>
というテキストがセットされていると仮定します。</p>
<ul>
<li><code>modifier = "名前\n"</code><br>名前<br>こんにちは</li>
<li><code>modifier = function(t) return "名前「" .. t:match("^%s*(.-)%s*$") .. "」" end</code><br>名前「こんにちは」</li>
<li><code>modifier = "&lt;kern50&gt;"</code><br>&lt;kern50&gt;こんにちは</li>
</ul>
<h2
id=".E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA.EF.BC.88.E3.82.AD.E3.83.A3.E3.83.83.E3.82.B7.E3.83.A5.EF.BC.89">字幕表示（キャッシュ）</h2>
<p><code>字幕表示（キャッシュ）</code> は <a
href="prep.html#.E5.AD.97.E5.B9.95.E6.BA.96.E5.82.99"><code>字幕準備</code></a>
で用意されたテキストを画面に表示するためのオブジェクトです。<br />
基本的な機能は <a
href="#.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA"><code>字幕表示</code></a>
と同じですが、それに加えて更にキャッシュ機構が追加されており、うまく活用することによって描画コストを下げることができます。</p>
<p><code>字幕表示（キャッシュ）</code>
は拡張編集の右クリックメニューから
<code>メディアオブジェクトの追加</code>→<code>PSDToolKit</code>→<code>字幕表示（キャッシュ）</code>
で作成できます。</p>
<p><code>字幕表示（キャッシュ）</code> では <code>字幕準備</code>
の設置区間に合わせて <a href="subobj.html">subobj アニメーション効果</a>
が使用可能です。</p>
<p>テキスト入力欄には以下の設定があります。</p>
<table>
<thead>
<tr class="header">
<th>設定名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>layer</code></td>
<td><a
href="prep.html#.E5.AD.97.E5.B9.95.E6.BA.96.E5.82.99"><code>字幕準備</code></a>があるレイヤー番号を半角整数で指定します。</td>
</tr>
<tr class="even">
<td><code>modifier</code></td>
<td>文字列か関数を指定すると、字幕のテキストを改変できます。<br>文字列を指定した場合はテキストが先頭に追加され、関数を指定した場合は戻り値が字幕になります。</td>
</tr>
</tbody>
</table>
<p>modifier については <a
href="#modifier_.E3.81.AE.E4.BD.BF.E7.94.A8.E4.BE.8B">modifier
の使用例</a> を参照してください。<br />
上記以外の設定項目や効果については <a
href="decorate.html">テキストの装飾</a> を参照してください。</p>
<h2
id=".E8.87.AA.E5.8B.95.E6.8A.98.E3.82.8A.E8.BF.94.E3.81.97.E3.83.86.E3.82.AD.E3.82.B9.E3.83.88">自動折り返しテキスト</h2>
<p><code>自動折り返しテキスト</code>
は、一定以上の長さで自動的に折り返すことができる通常のテキストです。<br />
字幕ではないテキストで折り返しなどの機能が使いたい場合に有用です。</p>
<p><code>自動折り返しテキスト</code> は拡張編集の右クリックメニューから
<code>メディアオブジェクトの追加</code>→<code>PSDToolKit</code>→<code>自動折り返しテキスト</code>
で作成できます。</p>
<p>テキスト入力欄にある設定は <a
href="#.E5.AD.97.E5.B9.95.E8.A1.A8.E7.A4.BA.EF.BC.88.E3.82.AD.E3.83.A3.E3.83.83.E3.82.B7.E3.83.A5.EF.BC.89"><code>字幕表示（キャッシュ）</code></a>
とほぼ同じです。<br />
設定項目について詳しくは <a href="decorate.html">テキストの装飾</a>
を参照してください。</p>
</div>
<footer>
<dl>
<dt>Written by</dt>
<dd>oov</dd>
<dt>Generated at</dt>
<dd>2025-02-26T10:56:47Z</dd>
<dt>for</dt>
<dd>v0.2.0beta71 ( 9190e74 )</dd>
</dl>
</footer>
</div>
</body>
</html>
